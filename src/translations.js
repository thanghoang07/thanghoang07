/**
 * ðŸŒ Translation System Module
 * Centralized language management and translations
 */

// Translation data
export const translations = {
  vi: {
    // Navigation
    'nav-services': 'Dá»‹ch vá»¥',
    'nav-portfolio': 'Dá»± Ã¡n',
    'nav-experience': 'Kinh nghiá»‡m',
    'nav-blog': 'Blog',
    'nav-resume': 'Há»“ sÆ¡',
    
    // Hero section
    'hero-mynameis': 'TÃªn tÃ´i lÃ ',
    'hero-name': 'Thang Hoang Duc.',
    'hero-intro': 'Front-end developer vá»›i hÆ¡n 5 nÄƒm kinh nghiá»‡m phÃ¡t triá»ƒn giao diá»‡n ngÆ°á»i dÃ¹ng, Ä‘am mÃª táº¡o ra sáº£n pháº©m web hiá»‡n Ä‘áº¡i vÃ  tá»‘i Æ°u tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng.',
    
    // Specialized section
    'specialized-subtitle': 'ChuyÃªn mÃ´n',
    'specialized-title': 'ChuyÃªn vá»',
    'skill-ibm-title': 'PhÃ¡t triá»ƒn IBM BPM',
    'ux-desc': 'PhÃ¡t triá»ƒn á»©ng dá»¥ng IBM BPM vá»›i JavaScript vÃ  Java, thiáº¿t káº¿ giao diá»‡n theo gui-spec.',
    'skill-mobile-title': 'PhÃ¡t triá»ƒn Mobile',
    'webdev-desc': 'PhÃ¡t triá»ƒn á»©ng dá»¥ng mobile cross-platform báº±ng Xamarin.Forms cho iOS/Android.',
    'skill-iot-title': 'PhÃ¡t triá»ƒn IoT',
    'webdesign-desc': 'PhÃ¡t triá»ƒn á»©ng dá»¥ng IoT vÃ  káº¿t ná»‘i Azure IoT hub cho thiáº¿t bá»‹ tÃ¹y biáº¿n.',
    
    // Portfolio section
    'portfolio-subtitle': 'Dá»± Ã¡n cá»§a tÃ´i',
    'portfolio-title': 'Dá»± Ã¡n ná»•i báº­t',
    'project-agency-title': 'Website Agency',
    'project-agency-category': 'Thiáº¿t káº¿ Web',
    'project-dashboard-title': 'Ná»n táº£ng Dashboard',
    'project-dashboard-category': 'PhÃ¡t triá»ƒn Web',
    'project-ecommerce-title': 'Website ThÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­',
    'project-ecommerce-category': 'Thiáº¿t káº¿ UX',
    
    // Work experience
    'workexp-subtitle': 'Con Ä‘Æ°á»ng sá»± nghiá»‡p',
    'workexp-title': 'Kinh nghiá»‡m lÃ m viá»‡c',
    'role-hpt': 'IBM BPM Developer',
    'company-hpt-full': 'HPT Vietnam Corporation',
    'location-hpt': 'TP. Há»“ ChÃ­ Minh, Viá»‡t Nam',
    'period-hpt': 'ThÃ¡ng 10/2022 - Hiá»‡n táº¡i Â· ToÃ n thá»i gian',
    
    // Education
    'education-subtitle': 'Ká»¹ nÄƒng',
    'education-title': 'Ká»¹ nÄƒng',
    'university-name': 'TRÆ¯á»œNG Äáº I Há»ŒC NÃ”NG LÃ‚M TP.HCM',
    'faculty-name': 'Khoa cÃ´ng nghá»‡ thÃ´ng tin',
    'education-period': '09/2014 â€“ 2018',
    'skills-intro': 'Trong hÆ¡n 5 nÄƒm, tÃ´i Ä‘Ã£ khÃ´ng ngá»«ng há»c há»i trong lÄ©nh vá»±c CNTT vÃ  thá»­ nghiá»‡m cÃ¡c cÃ´ng nghá»‡, framework má»›i, vÃ  ngÃ y nay Ä‘Ã£ cÃ³ Ä‘Æ°á»£c tá»•ng há»£p nhá»¯ng ká»¹ nÄƒng chÃ­nh:',
    'skill-csharp-label': 'C#',
    'skill-java-label': 'Java',
    'skill-javascript-label': 'JavaScript',
    
    // Certifications
    'certifications-subtitle': 'Chá»©ng chá»‰',
    'certifications-title': 'Chá»©ng chá»‰',
    'cert-xamarin-title': 'PhÃ¡t triá»ƒn á»©ng dá»¥ng Mobile Ä‘a ná»n táº£ng Xamarin',
    'cert-xamarin-date': '05/2018',
    'cert-flutter-title': 'PhÃ¡t triá»ƒn Flutter',
    'cert-flutter-date': '01/2023',
    
    // Contact
    'contact-subtitle': 'LiÃªn há»‡',
    'contact-title': 'LiÃªn há»‡',
    'contact-address-label': 'Äá»‹a chá»‰',
    'contact-address-value': 'Äa Kao, Quáº­n 1, TP.HCM, Viá»‡t Nam',
    'contact-emailinfo-label': 'Email',
    'contact-phone-label': 'Äiá»‡n thoáº¡i',
    'contact-linkedin-label': 'LinkedIn',
    'copyright': 'Â© 2025 thanghoang07. Táº¥t cáº£ quyá»n Ä‘Æ°á»£c báº£o lÆ°u.'
  },
  en: {
    // Navigation
    'nav-services': 'Services',
    'nav-portfolio': 'Portfolio',
    'nav-experience': 'Experience',
    'nav-blog': 'Blog',
    'nav-resume': 'Resume',
    
    // Hero section
    'hero-mynameis': 'My name is',
    'hero-name': 'Thang Hoang Duc.',
    'hero-intro': 'Front-end developer with 5+ years of experience in UI development, passionate about creating modern web products and optimizing user experience.',
    
    // Specialized section
    'specialized-subtitle': 'Specialized',
    'specialized-title': 'Specialized in',
    'skill-ibm-title': 'IBM BPM Development',
    'ux-desc': 'Develop IBM BPM applications with JavaScript and Java, design interfaces according to gui-spec.',
    'skill-mobile-title': 'Mobile Development',
    'webdev-desc': 'Develop cross-platform mobile applications using Xamarin.Forms for iOS/Android.',
    'skill-iot-title': 'IoT Development',
    'webdesign-desc': 'Develop IoT applications and connect Azure IoT hub for custom devices.',
    
    // Portfolio section
    'portfolio-subtitle': 'My Works',
    'portfolio-title': 'Featured Portfolios',
    'project-agency-title': 'Agency Website',
    'project-agency-category': 'Web Design',
    'project-dashboard-title': 'Dashboard Platform',
    'project-dashboard-category': 'Web Development',
    'project-ecommerce-title': 'E-commerce Website',
    'project-ecommerce-category': 'UX Design',
    
    // Work experience
    'workexp-subtitle': 'Career Path',
    'workexp-title': 'Work Experience',
    'role-hpt': 'IBM BPM Developer',
    'company-hpt-full': 'HPT Vietnam Corporation',
    'location-hpt': 'Ho Chi Minh City, Vietnam',
    'period-hpt': 'Oct 2022 - Present Â· Full-time',
    
    // Education
    'education-subtitle': 'Professional Skillset',
    'education-title': 'Professional Skillset',
    'university-name': 'NONG LAM UNIVERSITY â€“ HO CHI MINH CITY',
    'faculty-name': 'Faculty of information technology',
    'education-period': '09/2014 â€“ 2018',
    'skills-intro': 'For 5+ years, I have been continuously learning in the field of IT and experimenting with new technologies and frameworks, and today have gained a summary of key skills:',
    'skill-csharp-label': 'C#',
    'skill-java-label': 'Java',
    'skill-javascript-label': 'JavaScript',
    
    // Certifications
    'certifications-subtitle': 'Certifications',
    'certifications-title': 'Certifications',
    'cert-xamarin-title': 'Xamarin Cross-Platform Mobile Apps Development',
    'cert-xamarin-date': '05/2018',
    'cert-flutter-title': 'Flutter Development',
    'cert-flutter-date': '01/2023',
    
    // Contact
    'contact-subtitle': 'Contact',
    'contact-title': 'Contact',
    'contact-address-label': 'Address',
    'contact-address-value': 'DaKao, District 1, HCMC, VietNam',
    'contact-emailinfo-label': 'Email',
    'contact-phone-label': 'Phone',
    'contact-linkedin-label': 'LinkedIn',
    'copyright': 'Â© 2025 thanghoang07. All rights reserved.'
  }
};

// Form placeholders data
const formPlaceholders = {
  vi: {
    'contact-name-input': 'Há» tÃªn',
    'contact-email-input': 'Email',
    'contact-message-input': 'Tin nháº¯n',
    'contact-send-btn': 'Gá»­i tin nháº¯n'
  },
  en: {
    'contact-name-input': 'Name',
    'contact-email-input': 'Email',
    'contact-message-input': 'Message',
    'contact-send-btn': 'Send Message'
  }
};

/**
 * Language Management Class
 */
export class LanguageManager {
  constructor() {
    this.currentLanguage = localStorage.getItem('language') || 'vi';
  }

  /**
   * Initialize language toggle functionality
   */
  init() {
    console.log('ðŸŒ Initializing language system...');
    
    const button = document.getElementById('toggle-language');
    if (!button) {
      console.warn('Language button not found');
      return;
    }

    // Apply saved language
    this.applyLanguage(this.currentLanguage);

    // Add click handler
    button.addEventListener('click', (e) => {
      e.preventDefault();
      e.stopPropagation();
      this.toggleLanguage();
    });

    console.log('âœ… Language system ready');
  }

  /**
   * Toggle between languages
   */
  toggleLanguage() {
    const newLang = this.currentLanguage === 'vi' ? 'en' : 'vi';
    console.log(`ðŸŒ Switching from ${this.currentLanguage} to ${newLang}`);

    this.currentLanguage = newLang;
    this.applyLanguage(newLang);
    localStorage.setItem('language', newLang);

    console.log(`âœ… Language switched to: ${newLang}`);
  }

  /**
   * Apply language to UI
   */
  applyLanguage(lang) {
    console.log(`ðŸŒ Applying language: ${lang}`);

    // Update flag icons
    this.updateFlagIcons(lang);
    
    // Translate content
    this.translateContent(lang);
    
    // Update form placeholders
    this.updateFormPlaceholders(lang);
    
    // Set document language
    document.documentElement.setAttribute('lang', lang);
  }

  /**
   * Update flag icons visibility
   */
  updateFlagIcons(lang) {
    const viIcon = document.getElementById('lang-vi-icon');
    const enIcon = document.getElementById('lang-en-icon');

    if (lang === 'vi') {
      if (viIcon) {
        viIcon.classList.remove('hidden');
        viIcon.style.display = 'inline';
      }
      if (enIcon) {
        enIcon.classList.add('hidden');
        enIcon.style.display = 'none';
      }
    } else {
      if (viIcon) {
        viIcon.classList.add('hidden');
        viIcon.style.display = 'none';
      }
      if (enIcon) {
        enIcon.classList.remove('hidden');
        enIcon.style.display = 'inline';
      }
    }
  }

  /**
   * Translate all content elements
   */
  translateContent(lang) {
    const langData = translations[lang];
    if (!langData) {
      console.warn(`ðŸŒ No translation data for language: ${lang}`);
      return;
    }

    let translatedCount = 0;

    // Translate all elements with IDs that exist in translation data
    Object.keys(langData).forEach(key => {
      const element = document.getElementById(key);
      if (element) {
        element.textContent = langData[key];
        translatedCount++;
      }
    });

    console.log(`ðŸŒ Translated ${translatedCount} elements to ${lang}`);
  }

  /**
   * Update form placeholders
   */
  updateFormPlaceholders(lang) {
    const langPlaceholders = formPlaceholders[lang];
    if (!langPlaceholders) return;

    Object.keys(langPlaceholders).forEach(id => {
      const element = document.getElementById(id);
      if (element) {
        if (element.tagName === 'BUTTON') {
          element.textContent = langPlaceholders[id];
        } else {
          element.placeholder = langPlaceholders[id];
        }
      }
    });
  }

  /**
   * Get current language
   */
  getCurrentLanguage() {
    return this.currentLanguage;
  }
}

// Create singleton instance
export const languageManager = new LanguageManager();